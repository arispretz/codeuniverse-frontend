<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/components/AssistantSidebar.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/components/AssistantSidebar.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview AssistantSidebar component.
 * Provides an interactive sidebar with a code assistant that can act as a mentor
 * (explaining code) or generate code snippets directly. Includes chat history,
 * language selection, user level selection, and assistant mode toggling.
 *
 * @module components/AssistantSidebar
 */

import React, { useState } from "react";
import {
  Box,
  Typography,
  Button,
  Select,
  MenuItem,
  Paper,
  Divider,
  TextField,
} from "@mui/material";
import ReactMarkdown from "react-markdown";

import {
  getAssistantReply,
  getAssistantCodeReply,
} from "../services/assistantService.js";

import { cleanMentorOutput } from "../utils/cleanMentorOutput";

/**
 * AssistantSidebar Component
 *
 * @function AssistantSidebar
 * @param {Object} props - Component props.
 * @param {string} props.language - Current programming language selected.
 * @param {Function} props.setLanguage - Setter function to update the programming language.
 * @param {Function} props.showSnackbar - Function to show notifications.
 * @param {string} props.code - Current code in the editor.
 * @param {Function} props.setCode - Setter function to update the code in the editor.
 * @param {string} props.assistantMode - Current mode of the assistant ("mentor" or "code").
 * @param {Function} props.setAssistantMode - Setter function to update the assistant mode.
 * @returns {JSX.Element} Sidebar component with assistant chat and controls.
 *
 * @example
 * &lt;AssistantSidebar
 *   language="javascript"
 *   setLanguage={setLanguage}
 *   showSnackbar={showSnackbar}
 *   code={editorCode}
 *   setCode={setEditorCode}
 *   assistantMode="mentor"
 *   setAssistantMode={setAssistantMode}
 * />
 */
const AssistantSidebar = ({
  language,
  setLanguage,
  showSnackbar,
  code,
  setCode,
  assistantMode,
  setAssistantMode,
}) => {
  const [chatInput, setChatInput] = useState("");
  const [chatHistory, setChatHistory] = useState([
    { role: "assistant", content: "ðŸ‘‹ Hello, how can I help you with your code?" },
  ]);
  const [isTyping, setIsTyping] = useState(false);
  const [userLevel, setUserLevel] = useState("intermediate");

  /**
   * Sends a request to the assistant service based on the current mode.
   * In "mentor" mode, returns explanations and guidance.
   * In "code" mode, generates and applies code directly to the editor.
   *
   * @async
   * @function handleAssistantRequest
   * @returns {Promise&lt;void>} Resolves when the assistant response is processed.
   */
  const handleAssistantRequest = async () => {
    if (!chatInput.trim()) return;
    setIsTyping(true);

    try {
      const userId = import.meta.env.VITE_ASSISTANT_USER_ID;
      if (!userId) {
        throw new Error("Missing environment variable: VITE_ASSISTANT_USER_ID");
      }

      const payload = {
        prompt: chatInput,
        code,
        language,
        user_id: userId,
        user_level: userLevel,
      };

      const userMessage = { role: "user", content: chatInput };

      if (assistantMode === "mentor") {
        const replyText = await getAssistantReply(payload);

        const isError =
          typeof replyText === "string" &amp;&amp; replyText.startsWith("âš ï¸");
        const safeText = isError
          ? "Step 1: Summarize the goal of the code.\nStep 2: Explain the main flow.\nStep 3: Mention edge cases.\n\nLimitation: May not handle invalid inputs."
          : replyText;

        const cleanReply = cleanMentorOutput(safeText);
        const assistantMessage = {
          role: "assistant",
          content: cleanReply || "",
        };
        setChatHistory((prev) => [...prev, userMessage, assistantMessage]);
      } else {
        const codeReply = await getAssistantCodeReply(payload);
        if (codeReply) {
          setCode(codeReply);
          showSnackbar("âœ¨ Code inserted into the editor");
          const assistantMessage = {
            role: "assistant",
            content: "âœ… Code generated and applied in the editor.",
          };
          setChatHistory((prev) => [...prev, userMessage, assistantMessage]);
        } else {
          setChatHistory((prev) => [
            ...prev,
            userMessage,
            { role: "assistant", content: "âŒ Could not generate code." },
          ]);
        }
      }
    } catch (error) {
      console.error("âŒ Error in assistant:", error);
      setChatHistory((prev) => [
        ...prev,
        { role: "assistant", content: "âŒ Error generating response." },
      ]);
    } finally {
      setIsTyping(false);
      setChatInput("");
    }
  };

  return (
    &lt;Box
      sx={{
        mt: 3,
        mb: 3,
        display: "flex",
        flexDirection: "column",
        height: "100%",
      }}
    >
      &lt;Typography variant="subtitle1">ðŸ§  Code Assistant&lt;/Typography>

      {/* User level selector */}
      &lt;Select
        value={userLevel}
        onChange={(e) => setUserLevel(e.target.value)}
        sx={{ mt: 2 }}
      >
        &lt;MenuItem value="beginner">Beginner&lt;/MenuItem>
        &lt;MenuItem value="intermediate">Intermediate&lt;/MenuItem>
        &lt;MenuItem value="advanced">Advanced&lt;/MenuItem>
      &lt;/Select>

      {/* Language selector */}
      &lt;Select
        value={language}
        onChange={(e) => setLanguage(e.target.value)}
        sx={{ mt: 2 }}
      >
        &lt;MenuItem value="javascript">JavaScript&lt;/MenuItem>
        &lt;MenuItem value="python">Python&lt;/MenuItem>
        &lt;MenuItem value="cpp">C++&lt;/MenuItem>
        &lt;MenuItem value="java">Java&lt;/MenuItem>
      &lt;/Select>

      {/* Assistant mode toggle */}
      &lt;Box sx={{ mb: 2, mt: 2 }}>
        &lt;Typography variant="subtitle2">Assistant Mode:&lt;/Typography>
        &lt;Button
          variant={assistantMode === "mentor" ? "contained" : "outlined"}
          onClick={() => setAssistantMode("mentor")}
          sx={{ mr: 1 }}
        >
          Mentor
        &lt;/Button>
        &lt;Button
          variant={assistantMode === "code" ? "contained" : "outlined"}
          onClick={() => setAssistantMode("code")}
        >
          Code Only
        &lt;/Button>
      &lt;/Box>

      &lt;Divider sx={{ my: 2 }} />
      &lt;Typography variant="subtitle2">ðŸ’¬ Assistant Chat&lt;/Typography>

      {/* Chat history */}
      &lt;Paper
        variant="outlined"
        sx={{
          p: 2,
          flex: 1,
          maxHeight: 300,
          overflowY: "auto",
          mb: 2,
        }}
      >
        {chatHistory.map((msg, i) => (
          &lt;Box
            key={i}
            sx={{
              textAlign: msg.role === "user" ? "right" : "left",
              mb: 1,
            }}
          >
            &lt;Box
              sx={{
                display: "inline-block",
                bgcolor: msg.role === "user" ? "#1976d2" : "#e0e0e0",
                color: msg.role === "user" ? "#fff" : "#000",
                p: 1.5,
                borderRadius: 2,
                maxWidth: "80%",
                fontSize: "14px",
                wordBreak: "break-word",
              }}
            >
              &lt;ReactMarkdown>{msg.content}&lt;/ReactMarkdown>
            &lt;/Box>
          &lt;/Box>
        ))}
        {isTyping &amp;&amp; (
          &lt;Typography variant="body2" color="text.secondary">
            ðŸ§  The assistant is thinking...
          &lt;/Typography>
        )}
      &lt;/Paper>

      {/* Chat input */}
      &lt;Box display="flex" gap={2}>
        &lt;TextField
          fullWidth
          size="small"
          value={chatInput}
          onChange={(e) => setChatInput(e.target.value)}
          placeholder="Type your message..."
          onKeyDown={(e) => {
            if (e.key === "Enter") handleAssistantRequest();
          }}
        />
        &lt;Button variant="contained" onClick={handleAssistantRequest}>
          {assistantMode === "code" ? "âœ¨ Generate" : "ðŸ§  Send"}
        &lt;/Button>
      &lt;/Box>
    &lt;/Box>
  );
};

export default AssistantSidebar;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="babel.module_config.html">babel.config</a></li><li><a href="eslint.module_config.html">eslint.config</a></li><li><a href="jest.module_config.html">jest.config</a></li><li><a href="jest.module_setup.html">jest.setup</a></li><li><a href="module-ColorModeContext.html">ColorModeContext</a></li><li><a href="module-ThemeWrapper.html">ThemeWrapper</a></li><li><a href="module-auth_roles.html">auth/roles</a></li><li><a href="module-auth_useFirebaseAuth.html">auth/useFirebaseAuth</a></li><li><a href="module-components_AssistantSidebar.html">components/AssistantSidebar</a></li><li><a href="module-components_AuthProviderButton.html">components/AuthProviderButton</a></li><li><a href="module-components_Column.html">components/Column</a></li><li><a href="module-components_ColumnDroppable.html">components/ColumnDroppable</a></li><li><a href="module-components_EditorPanel.html">components/EditorPanel</a></li><li><a href="module-components_ErrorBoundaryWrapper.html">components/ErrorBoundaryWrapper</a></li><li><a href="module-components_FileTree.html">components/FileTree</a></li><li><a href="module-components_Footer.html">components/Footer</a></li><li><a href="module-components_FormCard.html">components/FormCard</a></li><li><a href="module-components_Input.html">components/Input</a></li><li><a href="module-components_KanbanModals.html">components/KanbanModals</a></li><li><a href="module-components_KanbanOverlay.html">components/KanbanOverlay</a></li><li><a href="module-components_KanbanTaskPreview.html">components/KanbanTaskPreview</a></li><li><a href="module-components_KanbanUtils.html">components/KanbanUtils</a></li><li><a href="module-components_Loading.html">components/Loading</a></li><li><a href="module-components_LocalTaskPanel.html">components/LocalTaskPanel</a></li><li><a href="module-components_Logo.html">components/Logo</a></li><li><a href="module-components_OutputPanel.html">components/OutputPanel</a></li><li><a href="module-components_PersonalTaskPreview.html">components/PersonalTaskPreview</a></li><li><a href="module-components_PersonalTasksPanel.html">components/PersonalTasksPanel</a></li><li><a href="module-components_ProjectSelector.html">components/ProjectSelector</a></li><li><a href="module-components_ProjectSummaryDashboard.html">components/ProjectSummaryDashboard</a></li><li><a href="module-components_RedirectHandler.html">components/RedirectHandler</a></li><li><a href="module-components_SortableTask.html">components/SortableTask</a></li><li><a href="module-components_SuspenseWrapper.html">components/SuspenseWrapper</a></li><li><a href="module-components_TaskCard.html">components/TaskCard</a></li><li><a href="module-components_TaskComments.html">components/TaskComments</a></li><li><a href="module-components_TaskFilters.html">components/TaskFilters</a></li><li><a href="module-components_TerminalPanel.html">components/TerminalPanel</a></li><li><a href="module-components_UserProfilePanel.html">components/UserProfilePanel</a></li><li><a href="module-components_modals_AddKanbanTaskModal.html">components/modals/AddKanbanTaskModal</a></li><li><a href="module-components_modals_AddTaskModal.html">components/modals/AddTaskModal</a></li><li><a href="module-components_modals_DeleteTaskModal.html">components/modals/DeleteTaskModal</a></li><li><a href="module-components_modals_EditLocalTaskModal.html">components/modals/EditLocalTaskModal</a></li><li><a href="module-components_modals_EditTaskModal.html">components/modals/EditTaskModal</a></li><li><a href="module-components_modals_LogoutModal.html">components/modals/LogoutModal</a></li><li><a href="module-components_modals_NewKanbanListModal.html">components/modals/NewKanbanListModal</a></li><li><a href="module-components_modals_NewListModal.html">components/modals/NewListModal</a></li><li><a href="module-components_modals_NewProjectModal.html">components/modals/NewProjectModal</a></li><li><a href="module-components_modals_ProjectDetailModal.html">components/modals/ProjectDetailModal</a></li><li><a href="module-components_modals_TaskDetailModal.html">components/modals/TaskDetailModal</a></li><li><a href="module-components_navbar_NavCategory.html">components/navbar/NavCategory</a></li><li><a href="module-components_navbar_Navbar.html">components/navbar/Navbar</a></li><li><a href="module-components_navbar_navDropdowns.html">components/navbar/navDropdowns</a></li><li><a href="module-context_AuthContext.html">context/AuthContext</a></li><li><a href="module-context_AuthProvider.html">context/AuthProvider</a></li><li><a href="module-context_ModalContext.html">context/ModalContext</a></li><li><a href="module-context_ModalProvider.html">context/ModalProvider</a></li><li><a href="module-firebase_auth.html">firebase/auth</a></li><li><a href="module-firebase_authUtils.html">firebase/authUtils</a></li><li><a href="module-hooks_init.html">hooks/init</a></li><li><a href="module-hooks_useAuth.html">hooks/useAuth</a></li><li><a href="module-hooks_useModal.html">hooks/useModal</a></li><li><a href="module-hooks_useUser.html">hooks/useUser</a></li><li><a href="module-hooks_utilsAuth.html">hooks/utilsAuth</a></li><li><a href="module-layouts_PrivateLayout.html">layouts/PrivateLayout</a></li><li><a href="module-layouts_PublicLayout.html">layouts/PublicLayout</a></li><li><a href="module-layouts_RootLayout.html">layouts/RootLayout</a></li><li><a href="module-main.html">main</a></li><li><a href="module-pages_AdminUserPanel.html">pages/AdminUserPanel</a></li><li><a href="module-pages_CodeReviewPanel.html">pages/CodeReviewPanel</a></li><li><a href="module-pages_CollaborativeCodeEditor.html">pages/CollaborativeCodeEditor</a></li><li><a href="module-pages_Dashboard.html">pages/Dashboard</a></li><li><a href="module-pages_KanbanBoard.html">pages/KanbanBoard</a></li><li><a href="module-pages_LocalTaskBoard.html">pages/LocalTaskBoard</a></li><li><a href="module-pages_MyProjects.html">pages/MyProjects</a></li><li><a href="module-pages_NotFound.html">pages/NotFound</a></li><li><a href="module-pages_PersonalTasksBoard.html">pages/PersonalTasksBoard</a></li><li><a href="module-pages_Profile.html">pages/Profile</a></li><li><a href="module-pages_ProjectDashboard.html">pages/ProjectDashboard</a></li><li><a href="module-pages_ProjectDocumentation.html">pages/ProjectDocumentation</a></li><li><a href="module-pages_ProjectManagementDashboard.html">pages/ProjectManagementDashboard</a></li><li><a href="module-pages_Settings.html">pages/Settings</a></li><li><a href="module-pages_TasksPage.html">pages/TasksPage</a></li><li><a href="module-pages_TeamChatModule.html">pages/TeamChatModule</a></li><li><a href="module-pages_docs_QuickStartGuide.html">pages/docs/QuickStartGuide</a></li><li><a href="module-pages_public__HelpCenter.html">pages/public//HelpCenter</a></li><li><a href="module-pages_public_AIAssistant.html">pages/public/AIAssistant</a></li><li><a href="module-pages_public_Blog.html">pages/public/Blog</a></li><li><a href="module-pages_public_ContactSupport.html">pages/public/ContactSupport</a></li><li><a href="module-pages_public_Features.html">pages/public/Features</a></li><li><a href="module-pages_public_ForDevelopers.html">pages/public/ForDevelopers</a></li><li><a href="module-pages_public_Home.html">pages/public/Home</a></li><li><a href="module-pages_public_PrivacyPolicy.html">pages/public/PrivacyPolicy</a></li><li><a href="module-pages_public_SignIn.html">pages/public/SignIn</a></li><li><a href="module-pages_public_SignUp.html">pages/public/SignUp</a></li><li><a href="module-pages_public_TermsOfService.html">pages/public/TermsOfService</a></li><li><a href="module-pages_public_Testimonials.html">pages/public/Testimonials</a></li><li><a href="module-routes_AdminDashboardRoutes.html">routes/AdminDashboardRoutes</a></li><li><a href="module-routes_AdminRoutes.html">routes/AdminRoutes</a></li><li><a href="module-routes_DashboardRoutes.html">routes/DashboardRoutes</a></li><li><a href="module-routes_IndexRoute.html">routes/IndexRoute</a></li><li><a href="module-routes_ModalRoutes.html">routes/ModalRoutes</a></li><li><a href="module-routes_ProtectedRoute.html">routes/ProtectedRoute</a></li><li><a href="module-routes_PublicRoutes.html">routes/PublicRoutes</a></li><li><a href="module-routes_Routes.html">routes/Routes</a></li><li><a href="module-services_assistantService.html">services/assistantService</a></li><li><a href="module-services_auth_handleLoginRedirect.html">services/auth/handleLoginRedirect</a></li><li><a href="module-services_auth_logoutRequest.html">services/auth/logoutRequest</a></li><li><a href="module-services_auth_roleUtils.html">services/auth/roleUtils</a></li><li><a href="module-services_auth_signInAuth.html">services/auth/signInAuth</a></li><li><a href="module-services_auth_signUpAuth.html">services/auth/signUpAuth</a></li><li><a href="module-services_avatarService.html">services/avatarService</a></li><li><a href="module-services_editorServices.html">services/editorServices</a></li><li><a href="module-services_fileService.html">services/fileService</a></li><li><a href="module-services_kanbanService.html">services/kanbanService</a></li><li><a href="module-services_profileService.html">services/profileService</a></li><li><a href="module-services_projectService.html">services/projectService</a></li><li><a href="module-services_taskService.html">services/taskService</a></li><li><a href="module-services_userService.html">services/userService</a></li><li><a href="module-theme.html">theme</a></li><li><a href="module-utils_authUtils.html">utils/authUtils</a></li><li><a href="module-utils_axiosConfig.html">utils/axiosConfig</a></li><li><a href="module-utils_cleanMentorOutput.html">utils/cleanMentorOutput</a></li><li><a href="module-utils_getRedirectForRole.html">utils/getRedirectForRole</a></li><li><a href="module-utils_monacoConfig.html">utils/monacoConfig</a></li><li><a href="module-utils_syncUserAndRedirect.html">utils/syncUserAndRedirect</a></li><li><a href="module-utils_taskUtils.html">utils/taskUtils</a></li><li><a href="module-utils_userToken.html">utils/userToken</a></li><li><a href="module-views_unauthorized.html">views/unauthorized</a></li><li><a href="vite.module_config.html">vite.config</a></li></ul><h3>Classes</h3><ul><li><a href="-_src_server_project.ts_-ConfiguredProject2.html">ConfiguredProject2</a></li><li><a href="-_src_server_project.ts_-ExternalProject2.html">ExternalProject2</a></li><li><a href="-_src_server_project.ts_-InferredProject2.html">InferredProject2</a></li><li><a href="-_src_server_project.ts_-Project3.html">Project3</a></li><li><a href="-_src_server_project.ts_-_AutoImportProviderProject.html">_AutoImportProviderProject</a></li><li><a href="-_src_services_textChanges.ts_-ChangeTracker.html">ChangeTracker</a></li><li><a href="module-components_ErrorBoundaryWrapper-ErrorBoundaryWrapper.html">ErrorBoundaryWrapper</a></li></ul><h3>Events</h3><ul><li><a href="module-utils_userToken.html#~event:onIdTokenChanged">onIdTokenChanged</a></li></ul><h3>Global</h3><ul><li><a href="global.html#renderWithRouter">renderWithRouter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Feb 13 2026 23:04:35 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
